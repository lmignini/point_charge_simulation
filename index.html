<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <link type="image/png" sizes="16x16" rel="icon" href="images/icons8-proton-solid-glyph-16.png">
    <link type="image/png" sizes="32x32" rel="icon" href="images/icons8-proton-solid-glyph-32.png">
    <link type="image/png" sizes="96x96" rel="icon" href="images/icons8-proton-solid-glyph-96.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Point charge simulation</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
        }

        .container {
            width: 800px;
            height: 500px;
            position: relative;
            border: 2px solid #333;
            overflow: hidden;
            margin-top: 20px;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
            background: green;
        }
    </style>
</head>
<body>
<div style="background-color: #f0f0f0; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 800px; width: 100%;">
    <h1 style="color: #333; text-align: center; margin-top: 0; border-bottom: 2px solid #4caf50; padding-bottom: 10px;">Point charge simulation</h1>

    <h2 style="color: #4caf50; margin-top: 20px; font-size: 1.3rem;">Controls:</h2>

    <ul style="list-style-type: none; padding: 0;">
        <li style="margin-bottom: 12px; display: flex; align-items: center;">
            <span style="background: #eee; padding: 3px 8px; border-radius: 4px; margin-right: 8px; border: 1px solid #ddd; font-family: monospace;">Left/Right click</span>
            <span>Spawn <span style="color: #f44336; font-weight: bold;">positive</span>/<span style="color: #2196F3; font-weight: bold;">negative</span> charge
            <span style="font-size: 0.9em; color: #666;">(Hold <span style="background: #eee; padding: 2px 5px; border-radius: 3px; border: 1px solid #ddd; font-family: monospace;">Shift</span> to fix in place)</span></span>
        </li>
        <li style="margin-bottom: 12px; display: flex; align-items: center;">
            <span style="background: #eee; padding: 3px 8px; border-radius: 4px; margin-right: 8px; border: 1px solid #ddd; font-family: monospace;">V</span>
            <span>Toggle voltmeter (Click to draw equipotential lines when active)</span>
        </li>
        <li style="margin-bottom: 12px; display: flex; align-items: center;">
            <span style="background: #eee; padding: 3px 8px; border-radius: 4px; margin-right: 8px; border: 1px solid #ddd; font-family: monospace;">C</span>
            <span>Clear equipotential lines</span>
        </li>
    </ul>
</div>
<div class="container">
    <canvas id="glcanvas" tabindex='1'></canvas>
</div>
<!-- Footer - changed background to match body and text color to dark for readability -->
<div style="text-align: center; margin-top: 20px; padding: 20px; background-color: #f0f0f0; color: #333; border-top: 2px solid #4caf50;">
    <p style="margin: 0; font-size: 14px;">
        Copyright © 2025 Leonardo Mignini. Licensed under the <a href="https://opensource.org/licenses/MIT" style="color: #4caf50; text-decoration: none;">MIT License</a>.
    </p>

    <p style="margin: 0; font-size: 14px;">
        <a target="_blank" href="https://icons8.com/icon/vt4myVyLKr8b/proton" style="color: #4caf50; text-decoration: none;">Proton</a> icon by <a target="_blank" href="https://icons8.com" style="color: #4caf50; text-decoration: none;">Icons8</a>
    </p>
    <p style="margin-top: 10px;">
        <a href="https://github.com/lmignini/point_charge_simulation" target="_blank" style="display: inline-flex; align-items: center; text-decoration: none; color: #4caf50;">
            <svg height="24" width="24" viewBox="0 0 16 16" version="1.1" aria-hidden="true" style="fill: #4caf50;">
                <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
            <span style="margin-left: 5px;">GitHub</span>
        </a>
    </p>
</div>

<!-- Minified and statically hosted version of https://github.com/not-fl3/macroquad/blob/master/js/mq_js_bundle.js -->
<script src="https://not-fl3.github.io/miniquad-samples/mq_js_bundle.js"></script>
<script>
    // Prevent context menu on right-click
    document.getElementById('glcanvas').addEventListener('contextmenu', function(e) {
        e.preventDefault();
        return false;
    });

    load("point_charge_simulation.wasm");
</script>
<script>
    window.addEventListener('load', function() {
        // Create warning overlay element
        const warningDiv = document.createElement('div');
        warningDiv.id = 'screen-size-warning';
        warningDiv.style.position = 'fixed';
        warningDiv.style.top = '0';
        warningDiv.style.left = '0';
        warningDiv.style.width = '100%';
        warningDiv.style.height = '100%';
        warningDiv.style.backgroundColor = '#333';
        warningDiv.style.color = 'white';
        warningDiv.style.display = 'none';
        warningDiv.style.zIndex = '1000';
        warningDiv.style.overflow = 'auto';

        // Create a centered content container
        warningDiv.innerHTML = `
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100%; padding: 20px; box-sizing: border-box; text-align: center;">
            <div style="max-width: 600px;">
                <h2>Device Screen Too Small</h2>
                <p>This simulation requires a screen width of at least 800px and height of at least 500px to run properly.</p>
                <p>Please resize your browser window or use a computer with a larger screen.</p>
            </div>
            <div style="margin-top: 30px; font-size: 14px;">
                Copyright © 2025 Leonardo Mignini. Licensed under the <a href="https://opensource.org/licenses/MIT" style="color: #4caf50; text-decoration: none;">MIT License</a>.
                <div style="margin-top: 10px;">
                    <a href="https://github.com/lmignini/point_charge_simulation" target="_blank" style="display: inline-flex; align-items: center; text-decoration: none; color: #4caf50;">
                        <svg height="24" width="24" viewBox="0 0 16 16" version="1.1" aria-hidden="true" style="fill: #4caf50;">
                            <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                        </svg>
                        <span style="margin-left: 5px;">GitHub</span>
                    </a>
                </div>
            </div>
        </div>
    `;

        document.body.appendChild(warningDiv);

        // Function to check screen dimensions
        function checkScreenSize() {
            if (window.innerWidth < 800 || window.innerHeight < 500) {
                warningDiv.style.display = 'block';
            } else {
                warningDiv.style.display = 'none';
            }
        }

        // Check on load and resize
        checkScreenSize();
        window.addEventListener('resize', checkScreenSize);
    });
</script>
</body>
</html>